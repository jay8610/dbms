create table lib_book (
bid int primary key,
bname varchar (30),
qty int
);

create table lib_audit (
audit_id int auto_increment primary key,
bid int,
bname varchar (30),
qty int,
action_type varchar (20),
action_time datetime default current_timestamp
);

insert into lib_book values
(1, 'DBMS', 70),
(2,'SPOS',40),
(3,'SPM',10),
(4,'CNS',60),
(5,'TOC',20);

delimiter //
create trigger t_update
after update on lib_book
for each row
begin
insert into lib_audit (bid, bname, qty, action_type)
values (old.bid, old.bname, old.qty, 'UPDATE');
end;
//

create trigger t_delete
after delete on lib_book
for each row
begin
insert into lib_audit (bid, bname, qty, action_type)
values (old.bid, old.bname, old.qty, 'DELETE');
end;
//
delimiter ;
select * from lib_book;
select * from lib_audit;
update lib_book set qty = 30 where bid = 5;
delete from lib_book where bid = 4;
select * from lib_book;
select * from lib_audit;
